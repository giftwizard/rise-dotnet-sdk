// <auto-generated>
/*
 * Rise.ai API Documentation
 *
 * No description provided (generated by Openapi Generator https://github.com/openapitools/openapi-generator)
 *
 * The version of the OpenAPI document: 2.0
 * Generated by: https://github.com/openapitools/openapi-generator.git
 */

#nullable enable

using System;
using System.Collections;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Linq;
using System.IO;
using System.Text;
using System.Text.RegularExpressions;
using System.Text.Json;
using System.Text.Json.Serialization;
using System.ComponentModel.DataAnnotations;
using Org.OpenAPITools.Client;

namespace Org.OpenAPITools.Model
{
    /// <summary>
    /// Idempotency
    /// </summary>
    public partial class Idempotency : IValidatableObject
    {
        /// <summary>
        /// Initializes a new instance of the <see cref="Idempotency" /> class.
        /// </summary>
        /// <param name="key">A unique identifier for the event. If you send the same idempotency key in multiple report event requests, for the same trigger key and app id, consecutive requests will be ignored after the first one. Note that the idempotency key is kept for a week before it expires.</param>
        /// <param name="ttlInMilliseconds">Optional. The time to live (TTL) in milliseconds before the key will expire. Default is a week.</param>
        [JsonConstructor]
        public Idempotency(Option<string?> key = default, Option<string?> ttlInMilliseconds = default)
        {
            KeyOption = key;
            TtlInMillisecondsOption = ttlInMilliseconds;
            OnCreated();
        }

        partial void OnCreated();

        /// <summary>
        /// Used to track the state of Key
        /// </summary>
        [JsonIgnore]
        [global::System.ComponentModel.EditorBrowsable(global::System.ComponentModel.EditorBrowsableState.Never)]
        public Option<string?> KeyOption { get; private set; }

        /// <summary>
        /// A unique identifier for the event. If you send the same idempotency key in multiple report event requests, for the same trigger key and app id, consecutive requests will be ignored after the first one. Note that the idempotency key is kept for a week before it expires.
        /// </summary>
        /// <value>A unique identifier for the event. If you send the same idempotency key in multiple report event requests, for the same trigger key and app id, consecutive requests will be ignored after the first one. Note that the idempotency key is kept for a week before it expires.</value>
        [JsonPropertyName("key")]
        public string? Key { get { return this.KeyOption; } set { this.KeyOption = new(value); } }

        /// <summary>
        /// Used to track the state of TtlInMilliseconds
        /// </summary>
        [JsonIgnore]
        [global::System.ComponentModel.EditorBrowsable(global::System.ComponentModel.EditorBrowsableState.Never)]
        public Option<string?> TtlInMillisecondsOption { get; private set; }

        /// <summary>
        /// Optional. The time to live (TTL) in milliseconds before the key will expire. Default is a week.
        /// </summary>
        /// <value>Optional. The time to live (TTL) in milliseconds before the key will expire. Default is a week.</value>
        [JsonPropertyName("ttlInMilliseconds")]
        public string? TtlInMilliseconds { get { return this.TtlInMillisecondsOption; } set { this.TtlInMillisecondsOption = new(value); } }

        /// <summary>
        /// Returns the string presentation of the object
        /// </summary>
        /// <returns>String presentation of the object</returns>
        public override string ToString()
        {
            StringBuilder sb = new StringBuilder();
            sb.Append("class Idempotency {\n");
            sb.Append("  Key: ").Append(Key).Append("\n");
            sb.Append("  TtlInMilliseconds: ").Append(TtlInMilliseconds).Append("\n");
            sb.Append("}\n");
            return sb.ToString();
        }

        /// <summary>
        /// To validate all properties of the instance
        /// </summary>
        /// <param name="validationContext">Validation context</param>
        /// <returns>Validation Result</returns>
        IEnumerable<ValidationResult> IValidatableObject.Validate(ValidationContext validationContext)
        {
            // Key (string) maxLength
            if (this.Key != null && this.Key.Length > 80)
            {
                yield return new ValidationResult("Invalid value for Key, length must be less than 80.", new [] { "Key" });
            }

            // Key (string) minLength
            if (this.Key != null && this.Key.Length < 1)
            {
                yield return new ValidationResult("Invalid value for Key, length must be greater than 1.", new [] { "Key" });
            }

            yield break;
        }
    }

    /// <summary>
    /// A Json converter for type <see cref="Idempotency" />
    /// </summary>
    public class IdempotencyJsonConverter : JsonConverter<Idempotency>
    {
        /// <summary>
        /// Deserializes json to <see cref="Idempotency" />
        /// </summary>
        /// <param name="utf8JsonReader"></param>
        /// <param name="typeToConvert"></param>
        /// <param name="jsonSerializerOptions"></param>
        /// <returns></returns>
        /// <exception cref="JsonException"></exception>
        public override Idempotency Read(ref Utf8JsonReader utf8JsonReader, Type typeToConvert, JsonSerializerOptions jsonSerializerOptions)
        {
            int currentDepth = utf8JsonReader.CurrentDepth;

            if (utf8JsonReader.TokenType != JsonTokenType.StartObject && utf8JsonReader.TokenType != JsonTokenType.StartArray)
                throw new JsonException();

            JsonTokenType startingTokenType = utf8JsonReader.TokenType;

            Option<string?> key = default;
            Option<string?> ttlInMilliseconds = default;

            while (utf8JsonReader.Read())
            {
                if (startingTokenType == JsonTokenType.StartObject && utf8JsonReader.TokenType == JsonTokenType.EndObject && currentDepth == utf8JsonReader.CurrentDepth)
                    break;

                if (startingTokenType == JsonTokenType.StartArray && utf8JsonReader.TokenType == JsonTokenType.EndArray && currentDepth == utf8JsonReader.CurrentDepth)
                    break;

                if (utf8JsonReader.TokenType == JsonTokenType.PropertyName && currentDepth == utf8JsonReader.CurrentDepth - 1)
                {
                    string? localVarJsonPropertyName = utf8JsonReader.GetString();
                    utf8JsonReader.Read();

                    switch (localVarJsonPropertyName)
                    {
                        case "key":
                            key = new Option<string?>(utf8JsonReader.GetString()!);
                            break;
                        case "ttlInMilliseconds":
                            ttlInMilliseconds = new Option<string?>(utf8JsonReader.GetString()!);
                            break;
                        default:
                            break;
                    }
                }
            }

            if (key.IsSet && key.Value == null)
                throw new ArgumentNullException(nameof(key), "Property is not nullable for class Idempotency.");

            if (ttlInMilliseconds.IsSet && ttlInMilliseconds.Value == null)
                throw new ArgumentNullException(nameof(ttlInMilliseconds), "Property is not nullable for class Idempotency.");

            return new Idempotency(key, ttlInMilliseconds);
        }

        /// <summary>
        /// Serializes a <see cref="Idempotency" />
        /// </summary>
        /// <param name="writer"></param>
        /// <param name="idempotency"></param>
        /// <param name="jsonSerializerOptions"></param>
        /// <exception cref="NotImplementedException"></exception>
        public override void Write(Utf8JsonWriter writer, Idempotency idempotency, JsonSerializerOptions jsonSerializerOptions)
        {
            writer.WriteStartObject();

            WriteProperties(writer, idempotency, jsonSerializerOptions);
            writer.WriteEndObject();
        }

        /// <summary>
        /// Serializes the properties of <see cref="Idempotency" />
        /// </summary>
        /// <param name="writer"></param>
        /// <param name="idempotency"></param>
        /// <param name="jsonSerializerOptions"></param>
        /// <exception cref="NotImplementedException"></exception>
        public void WriteProperties(Utf8JsonWriter writer, Idempotency idempotency, JsonSerializerOptions jsonSerializerOptions)
        {
            if (idempotency.KeyOption.IsSet && idempotency.Key == null)
                throw new ArgumentNullException(nameof(idempotency.Key), "Property is required for class Idempotency.");

            if (idempotency.TtlInMillisecondsOption.IsSet && idempotency.TtlInMilliseconds == null)
                throw new ArgumentNullException(nameof(idempotency.TtlInMilliseconds), "Property is required for class Idempotency.");

            if (idempotency.KeyOption.IsSet)
                writer.WriteString("key", idempotency.Key);

            if (idempotency.TtlInMillisecondsOption.IsSet)
                writer.WriteString("ttlInMilliseconds", idempotency.TtlInMilliseconds);
        }
    }
}
