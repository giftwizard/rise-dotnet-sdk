// <auto-generated>
/*
 * Rise.ai API Documentation
 *
 * No description provided (generated by Openapi Generator https://github.com/openapitools/openapi-generator)
 *
 * The version of the OpenAPI document: 2.0
 * Generated by: https://github.com/openapitools/openapi-generator.git
 */

#nullable enable

using System;
using System.Collections;
using System.Collections.Generic;
using System.Collections.ObjectModel;
using System.Linq;
using System.IO;
using System.Text;
using System.Text.RegularExpressions;
using System.Text.Json;
using System.Text.Json.Serialization;
using System.ComponentModel.DataAnnotations;
using Org.OpenAPITools.Client;

namespace Org.OpenAPITools.Model
{
    /// <summary>
    /// Once a user has completed the installation process and given your app permission to access their data, use the authorization code we sent you, together with your secret key, to request an access token and a refresh token. (The access token is only valid for 5 minutes.) You can find your secret key in the Wix Developers Center.
    /// </summary>
    public partial class RefreshTokenResponse : IValidatableObject
    {
        /// <summary>
        /// Initializes a new instance of the <see cref="RefreshTokenResponse" /> class.
        /// </summary>
        /// <param name="refreshToken">Your app instance’s refresh token that never expires. Identical to the one that you’ve sent in the request.</param>
        /// <param name="accessToken">Created access token that you can use to make Wix API calls. It expires after 5 minutes.</param>
        [JsonConstructor]
        public RefreshTokenResponse(Option<string?> refreshToken = default, Option<string?> accessToken = default)
        {
            RefreshTokenOption = refreshToken;
            AccessTokenOption = accessToken;
            OnCreated();
        }

        partial void OnCreated();

        /// <summary>
        /// Used to track the state of RefreshToken
        /// </summary>
        [JsonIgnore]
        [global::System.ComponentModel.EditorBrowsable(global::System.ComponentModel.EditorBrowsableState.Never)]
        public Option<string?> RefreshTokenOption { get; private set; }

        /// <summary>
        /// Your app instance’s refresh token that never expires. Identical to the one that you’ve sent in the request.
        /// </summary>
        /// <value>Your app instance’s refresh token that never expires. Identical to the one that you’ve sent in the request.</value>
        [JsonPropertyName("refresh_token")]
        public string? RefreshToken { get { return this.RefreshTokenOption; } set { this.RefreshTokenOption = new(value); } }

        /// <summary>
        /// Used to track the state of AccessToken
        /// </summary>
        [JsonIgnore]
        [global::System.ComponentModel.EditorBrowsable(global::System.ComponentModel.EditorBrowsableState.Never)]
        public Option<string?> AccessTokenOption { get; private set; }

        /// <summary>
        /// Created access token that you can use to make Wix API calls. It expires after 5 minutes.
        /// </summary>
        /// <value>Created access token that you can use to make Wix API calls. It expires after 5 minutes.</value>
        [JsonPropertyName("access_token")]
        public string? AccessToken { get { return this.AccessTokenOption; } set { this.AccessTokenOption = new(value); } }

        /// <summary>
        /// Returns the string presentation of the object
        /// </summary>
        /// <returns>String presentation of the object</returns>
        public override string ToString()
        {
            StringBuilder sb = new StringBuilder();
            sb.Append("class RefreshTokenResponse {\n");
            sb.Append("  RefreshToken: ").Append(RefreshToken).Append("\n");
            sb.Append("  AccessToken: ").Append(AccessToken).Append("\n");
            sb.Append("}\n");
            return sb.ToString();
        }

        /// <summary>
        /// To validate all properties of the instance
        /// </summary>
        /// <param name="validationContext">Validation context</param>
        /// <returns>Validation Result</returns>
        IEnumerable<ValidationResult> IValidatableObject.Validate(ValidationContext validationContext)
        {
            yield break;
        }
    }

    /// <summary>
    /// A Json converter for type <see cref="RefreshTokenResponse" />
    /// </summary>
    public class RefreshTokenResponseJsonConverter : JsonConverter<RefreshTokenResponse>
    {
        /// <summary>
        /// Deserializes json to <see cref="RefreshTokenResponse" />
        /// </summary>
        /// <param name="utf8JsonReader"></param>
        /// <param name="typeToConvert"></param>
        /// <param name="jsonSerializerOptions"></param>
        /// <returns></returns>
        /// <exception cref="JsonException"></exception>
        public override RefreshTokenResponse Read(ref Utf8JsonReader utf8JsonReader, Type typeToConvert, JsonSerializerOptions jsonSerializerOptions)
        {
            int currentDepth = utf8JsonReader.CurrentDepth;

            if (utf8JsonReader.TokenType != JsonTokenType.StartObject && utf8JsonReader.TokenType != JsonTokenType.StartArray)
                throw new JsonException();

            JsonTokenType startingTokenType = utf8JsonReader.TokenType;

            Option<string?> refreshToken = default;
            Option<string?> accessToken = default;

            while (utf8JsonReader.Read())
            {
                if (startingTokenType == JsonTokenType.StartObject && utf8JsonReader.TokenType == JsonTokenType.EndObject && currentDepth == utf8JsonReader.CurrentDepth)
                    break;

                if (startingTokenType == JsonTokenType.StartArray && utf8JsonReader.TokenType == JsonTokenType.EndArray && currentDepth == utf8JsonReader.CurrentDepth)
                    break;

                if (utf8JsonReader.TokenType == JsonTokenType.PropertyName && currentDepth == utf8JsonReader.CurrentDepth - 1)
                {
                    string? localVarJsonPropertyName = utf8JsonReader.GetString();
                    utf8JsonReader.Read();

                    switch (localVarJsonPropertyName)
                    {
                        case "refresh_token":
                            refreshToken = new Option<string?>(utf8JsonReader.GetString()!);
                            break;
                        case "access_token":
                            accessToken = new Option<string?>(utf8JsonReader.GetString()!);
                            break;
                        default:
                            break;
                    }
                }
            }

            if (refreshToken.IsSet && refreshToken.Value == null)
                throw new ArgumentNullException(nameof(refreshToken), "Property is not nullable for class RefreshTokenResponse.");

            if (accessToken.IsSet && accessToken.Value == null)
                throw new ArgumentNullException(nameof(accessToken), "Property is not nullable for class RefreshTokenResponse.");

            return new RefreshTokenResponse(refreshToken, accessToken);
        }

        /// <summary>
        /// Serializes a <see cref="RefreshTokenResponse" />
        /// </summary>
        /// <param name="writer"></param>
        /// <param name="refreshTokenResponse"></param>
        /// <param name="jsonSerializerOptions"></param>
        /// <exception cref="NotImplementedException"></exception>
        public override void Write(Utf8JsonWriter writer, RefreshTokenResponse refreshTokenResponse, JsonSerializerOptions jsonSerializerOptions)
        {
            writer.WriteStartObject();

            WriteProperties(writer, refreshTokenResponse, jsonSerializerOptions);
            writer.WriteEndObject();
        }

        /// <summary>
        /// Serializes the properties of <see cref="RefreshTokenResponse" />
        /// </summary>
        /// <param name="writer"></param>
        /// <param name="refreshTokenResponse"></param>
        /// <param name="jsonSerializerOptions"></param>
        /// <exception cref="NotImplementedException"></exception>
        public void WriteProperties(Utf8JsonWriter writer, RefreshTokenResponse refreshTokenResponse, JsonSerializerOptions jsonSerializerOptions)
        {
            if (refreshTokenResponse.RefreshTokenOption.IsSet && refreshTokenResponse.RefreshToken == null)
                throw new ArgumentNullException(nameof(refreshTokenResponse.RefreshToken), "Property is required for class RefreshTokenResponse.");

            if (refreshTokenResponse.AccessTokenOption.IsSet && refreshTokenResponse.AccessToken == null)
                throw new ArgumentNullException(nameof(refreshTokenResponse.AccessToken), "Property is required for class RefreshTokenResponse.");

            if (refreshTokenResponse.RefreshTokenOption.IsSet)
                writer.WriteString("refresh_token", refreshTokenResponse.RefreshToken);

            if (refreshTokenResponse.AccessTokenOption.IsSet)
                writer.WriteString("access_token", refreshTokenResponse.AccessToken);
        }
    }
}
